(this["webpackJsonpcode-scanner"]=this["webpackJsonpcode-scanner"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){var r,o=n(20).wrap,a=n(19);e.exports=function e(){return this instanceof e?o(a()):r||(r=o(a()))}},function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){e.exports=function(){return new Worker(n.p+"5adc6a6833404f43b4fc.worker.js")}},,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(9),c=n.n(a),i=(n(16),n(1)),s=(n(17),n(6)),d=n(2),u=n.n(d),l=n(7),f=n(10),m=new(0,n.n(f).a),h=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,o,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.video,r=t.maxVideoWidth,o=t.maxVideoHeight,a=t.facingMode,e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:a,width:{max:r},height:{max:o}}});case 3:return c=e.sent,n.srcObject=c,n.play(),e.next=8,new Promise((function(e){n.onloadedmetadata=e}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.canvas,n=e.codes,r=e.facingMode,o=e.codeOverlayColor,a=e.codeIndexColor,c=e.mirrorUserImage,i=t.getContext("2d"),s=t.width,d=t.height;i.clearRect(0,0,s,d),i.font="20px serif",i.strokeStyle=o,i.fillStyle=a,i.lineWidth=6,n.forEach((function(e,t){var n=e.points;i.beginPath();for(var o=0;o<n.length;++o){var a=n[o],s=a.x,d=a.y;0===o?i.moveTo(s,d):i.lineTo(s,d)}i.closePath(),i.stroke(),i.scale(w(c,r),1),i.fillText("#"+t,n[0].x,n[0].y-10),i.scale(1,1)}))},g=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,o,a,c,i,s,d,l,f,h,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.video,r=t.canvas,o=t.onResult,a=t.facingMode,c=t.codeOverlayColor,i=t.codeIndexColor,s=t.mirrorUserImage,d=n.videoWidth,l=n.videoHeight,r.width=d,r.height=l,d&&l){e.next=7;break}return e.abrupt("return");case 7:return(f=r.getContext("2d")).drawImage(n,0,0,d,l),h=f.getImageData(0,0,d,l),e.next=12,m.scanImageData(h);case 12:g=e.sent,v({canvas:r,codes:g,facingMode:a,codeOverlayColor:c,codeIndexColor:i,mirrorUserImage:s}),g.length&&o(g);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){return new Promise((function(t){setTimeout(t,e)}))},p=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,o,a,c,i,s,d,l,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.video,r=t.canvas,o=t.onResult,a=t.onError,c=t.maxVideoWidth,i=t.maxVideoHeight,s=t.facingMode,d=t.codeOverlayColor,l=t.codeIndexColor,f=t.mirrorUserImage,e.prev=1,e.next=4,h({video:n,maxVideoWidth:c,maxVideoHeight:i,facingMode:s});case 4:return e.next=7,g({video:n,canvas:r,onResult:o,facingMode:s,codeOverlayColor:d,codeIndexColor:l,mirrorUserImage:f});case 7:return e.next=9,x(800);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),a(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e,t){return e&&"user"===t?-1:1},b=function(e){var t={width:400,height:300,onResult:console.log,onError:console.error,maxVideoWidth:640,maxVideoHeight:640,facingMode:"environment",codeOverlayColor:"#00ff00",codeIndexColor:"#ff0000",mirrorUserImage:!0},n=Object(s.a)(Object(s.a)({},t),e),a=n.width,c=n.height,i=n.onResult,d=n.onError,u=n.maxVideoWidth,l=n.maxVideoHeight,f=n.facingMode,m=n.codeOverlayColor,h=n.codeIndexColor,v=n.mirrorUserImage,g=Object(r.useRef)(null),x=Object(r.useRef)(null);Object(r.useEffect)((function(){g.current&&x.current&&p({video:g.current,canvas:x.current,onResult:i,onError:d,maxVideoWidth:u,maxVideoHeight:l,facingMode:f,codeOverlayColor:m,codeIndexColor:h,mirrorUserImage:v})}),[g,x,i,d,u,l,f,m,h,v]);var b={position:"absolute",top:0,left:0,width:"".concat(a,"px"),height:"".concat(c,"px")};return o.a.createElement("div",{style:Object(s.a)(Object(s.a)({},b),{},{position:"relative",transform:"scaleX(".concat(w(v,f),")")})},o.a.createElement("video",{ref:g,width:a,height:c,style:b}),o.a.createElement("canvas",{ref:x,width:a,height:c,style:b}))};var O=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("environment"),s=Object(i.a)(c,2),d=s[0],u=s[1];return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"React Code Scanner"),o.a.createElement("div",null,"Result: ",n),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return a("")}},"reset")),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return u("environment"===d?"user":"environment")}},"current camera: ",d," switch camera")),o.a.createElement(b,{onResult:function(e){return a(e.map((function(e){return e.value})).join(", "))},onError:a,facingMode:d}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.6eb7939b.chunk.js.map